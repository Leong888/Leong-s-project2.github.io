!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).Vue3baiduMapGl={},e.Vue)}(this,(function(e,n){"use strict";const t={1:"PLAYING",2:"INITIAL",3:"STOPPING"};const o={0:"BMAP_STATUS_SUCCESS",8:"ERR_POSITION_TIMEOUT",2:"ERR_POSITION_UNAVAILABLE",6:"ERR_PERMISSION_DENIED"};function a(e){return"[object String]"===Object.prototype.toString.call(e)}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e}function r(e){return(n,t)=>{(n===t||n!==t&&JSON.stringify(n)!==JSON.stringify(t))&&e(n)}}function s(e){console.error(`[Vue3 BaiduMap GL] ${e}`)}function u(e,n,t){return new Promise((o=>{e.getPoint(n,(e=>{o(e||null)}),t)}))}function c(e,n,t){return new Promise((o=>{e.getLocation(new BMapGL.Point(n.lng,n.lat),(e=>{o(e||null)}),t)}))}const d={all:p=p||new Map,on:function(e,n){var t=p.get(e);t?t.push(n):p.set(e,[n])},off:function(e,n){var t=p.get(e);t&&(n?t.splice(t.indexOf(n)>>>0,1):p.set(e,[]))},emit:function(e,n){var t=p.get(e);t&&t.slice().map((function(e){e(n)})),(t=p.get("*"))&&t.slice().map((function(t){t(e,n)}))}};var p;function f(){return{emit:d.emit,on:d.on,off:d.off}}function g(){const{uid:e,emit:t}=n.getCurrentInstance(),{on:o,emit:a,off:l}=f(),i=`__initd__${e}`;return o(i,(e=>{t("initd",e)})),n.onUnmounted((()=>{t("unload"),l(i)})),{ready:(e,n)=>{a(i,{map:e,instance:n,BMapGL:window.BMapGL})}}}function m(e,n,t){for(const o of Object.keys(e))if(/^on/.test(o)&&e[o]){const e=o.replace(/^on/,"").toLocaleLowerCase();t.addEventListener(e,(t=>{var o,a;t.preventDefault=t.preventDefault||(null===(o=t.domEvent)||void 0===o?void 0:o.preventDefault.bind(t.domEvent)),t.stopPropagation=t.stopPropagation||(null===(a=t.domEvent)||void 0===a?void 0:a.stopPropagation.bind(t.domEvent)),n(e,t)}))}}const y={};function v({key:e,src:n,addCalToWindow:t}){return y[e]||(y[e]=new Promise(((o,a)=>{const l=document.createElement("script"),i=()=>{o(),window.document.body.removeChild(l)};t?window[e]=i:l.onload=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(l.onload=null,i())},l.src=n,l.type="text/javascript",l.defer=!0,l.onerror=a,document.body.appendChild(l)}))),y[e]}const h="//mapopen.bj.bcebos.com/github/BMapGLLib/TrackAnimation/src/TrackAnimation.min.js",w="https://code.bdstatic.com/npm/mapvgl@1.0.0-beta.159/dist/mapvgl.min.js",b="https://mapv.baidu.com/build/mapv.min.js",M="https://code.bdstatic.com/npm/mapvgl@1.0.0-beta.159/dist/mapvgl.threelayers.min.js",C={TrackAnimation:e=>v({src:e||h,addCalToWindow:!1,key:"trackAnimation"}),Mapvgl:e=>v({src:e||w,addCalToWindow:!1,key:"Mapvgl"}),Mapv:e=>v({src:e||b,addCalToWindow:!1,key:"Mapv"}),MapvglThree:e=>v({src:e||M,addCalToWindow:!1,key:"MapvglThree"})};const B={style:{color:"#999",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};var k=n.defineComponent(Object.assign(Object.assign({},{name:"BMap"}),{props:{ak:null,width:{default:"100%"},height:{default:"550px"},center:{default:()=>({lat:39.915185,lng:116.403901})},mapType:{default:"BMAP_NORMAL_MAP"},zoom:{default:14},heading:{default:0},tilt:{default:0},minZoom:{default:0},maxZoom:{default:21},noAnimation:{type:Boolean,default:!1},mapStyleId:null,mapStyleJson:null,showControls:{type:Boolean,default:!1},plugins:null,pluginsSourceLink:null,displayOptions:null,enableTraffic:{type:Boolean,default:!1},enableDragging:{type:Boolean,default:!0},enableInertialDragging:{type:Boolean,default:!0},enableScrollWheelZoom:{type:Boolean,default:!1},enableContinuousZoom:{type:Boolean,default:!0},enableResizeOnCenter:{type:Boolean,default:!0},enableDoubleClickZoom:{type:Boolean,default:!1},enableKeyboard:{type:Boolean,default:!0},enablePinchToZoom:{type:Boolean,default:!0},enableAutoResize:{type:Boolean,default:!0},onClick:null,onDblclick:null,onRightclick:null,onRightdblclick:null,onMaptypechange:null,onMousemove:null,onMouseover:null,onMouseout:null,onMovestart:null,onMoving:null,onMoveend:null,onZoomstart:null,onZoomend:null,onAddoverlay:null,onAddcontrol:null,onRemovecontrol:null,onRemoveoverlay:null,onClearoverlays:null,onDragstart:null,onDragging:null,onDragend:null,onAddtilelayer:null,onRemovetilelayer:null,onLoad:null,onResize:null,onHotspotclick:null,onHotspotover:null,onHotspotout:null,onTilesloaded:null,onTouchstart:null,onTouchmove:null,onTouchend:null,onLongpress:null},emits:["initd","unload","pluginReady","click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],setup(e,{expose:t,emit:o}){const l=e,i=n.ref();let u=null,c=n.ref(!1);const{ready:d}=g(),{uid:p,proxy:f}=n.getCurrentInstance(),y=a(l.width)?l.width:`${l.width}px`,h=a(l.height)?l.height:`${l.height}px`,w=l.ak||f.$baiduMapAk,b=l.plugins&&f.$baiduMapPlugins?Object.assign(f.$baiduMapPlugins,l.plugins):l.plugins||f.$baiduMapPlugins,M=l.pluginsSourceLink&&f.$baiduMapPluginsSourceLink?Object.assign(f.$baiduMapPluginsSourceLink,l.pluginsSourceLink):l.pluginsSourceLink||f.$baiduMapPluginsSourceLink||{};w||s("missing required props: ak");const k=`_initBMap${w}`;function O(){l.mapStyleId?u.setMapStyleV2({styleId:l.mapStyleId}):l.mapStyleJson&&u.setMapStyleV2({styleJson:l.mapStyleJson})}function L(e){e?u.setTrafficOn():u.setTrafficOff()}function S(e){var n,t;"string"==typeof e?u.centerAndZoom(e,l.zoom):u.centerAndZoom((n=e.lng,t=e.lat,new BMapGL.Point(n,t)),l.zoom)}function G(e){u.setDisplayOptions(e||{})}function P(e){u.setZoom(e,{noAnimation:l.noAnimation})}function I(e){void 0!==window[e]&&u.setMapType(window[e])}function z(e){u.setHeading(e)}function T(e){u.setTilt(e)}function A(e){e?u.enableDragging():u.disableDragging()}function x(e){e?u.enableInertialDragging():u.disableInertialDragging()}function _(e){e?u.enableScrollWheelZoom():u.disableScrollWheelZoom()}function j(e){e?u.enableContinuousZoom():u.disableContinuousZoom()}function E(e){e?u.enableResizeOnCenter():u.disableResizeOnCenter()}function D(e){e?u.enableDoubleClickZoom():u.disableDoubleClickZoom()}function R(e){e?u.enableKeyboard():u.disableKeyboard()}function W(e){e?u.enablePinchToZoom():u.disablePinchToZoom()}function N(e){e?u.enableAutoResize():u.disableAutoResize()}return n.onMounted((function(){v({src:`//api.map.baidu.com/api?type=webgl&v=1.0&ak=${w}&callback=${k}`,addCalToWindow:!0,key:k}).then((()=>{const{minZoom:e,maxZoom:t,mapType:a,enableAutoResize:p,showControls:f,center:g}=l;i.value&&(u=new BMapGL.Map(i.value,{minZoom:e,maxZoom:t,mapType:window[a],enableAutoResize:p,showControls:f}),S(g),function(){const{enableDragging:e,enableInertialDragging:n,enableScrollWheelZoom:t,enableContinuousZoom:o,enableResizeOnCenter:a,enableDoubleClickZoom:i,enableKeyboard:r,enablePinchToZoom:s,enableAutoResize:u,enableTraffic:c,displayOptions:d,mapType:p,zoom:f,tilt:g,heading:m}=l;P(f),T(g),L(c),z(m),I(p),R(r),A(e),N(u),W(s),j(o),E(a),D(i),_(t),x(n),G(d)}(),O(),n.watch((()=>l.zoom),P),n.watch((()=>l.tilt),T),n.watch((()=>l.heading),z),n.watch((()=>l.center),r(S),{deep:!0}),n.watch((()=>l.mapStyleId),O),n.watch((()=>l.mapStyleJson),r(O),{deep:!0}),n.watch((()=>l.displayOptions),r(G),{deep:!0}),n.watch((()=>l.mapType),I),n.watch((()=>l.enableTraffic),L),n.watch((()=>l.enableDragging),A),n.watch((()=>l.enableInertialDragging),x),n.watch((()=>l.enableScrollWheelZoom),_),n.watch((()=>l.enableContinuousZoom),j),n.watch((()=>l.enableResizeOnCenter),E),n.watch((()=>l.enableDoubleClickZoom),D),n.watch((()=>l.enableKeyboard),R),n.watch((()=>l.enablePinchToZoom),W),n.watch((()=>l.enableAutoResize),N),m(l,o,u),c.value||(c.value=!0,n.nextTick((()=>d(u,u))),b&&function(e,n={}){const t=[...new Set(e)].reduce(((e,t)=>{let o;return"string"==typeof t&&(o=C[t])?e.push(o(n[t])):"function"==typeof t&&e.push(t()),e}),[]);return Promise.all(t)}(b,M).then((()=>{o("pluginReady",u)})).catch((e=>{s("plugins load error: "+e)}))))})).catch(s)})),n.onUnmounted((()=>{null==u||u.destroy()})),t({getMapInstance:()=>u,getBaseMapOptions:()=>l,resetCenter:()=>S(l.center),setDragging:A}),n.provide("getMapInstance",(()=>u)),n.provide("parentUidGetter",p),n.provide("baseMapSetCenterAndZoom",(e=>S(e))),n.provide("baseMapSetDragging",(e=>A(e))),n.provide("getBaseMapOptions",(()=>l)),(e,t)=>(n.openBlock(),n.createElementBlock(n.Fragment,null,[n.createElementVNode("div",{class:"baidu-map-container",ref_key:"mapContainer",ref:i,style:n.normalizeStyle([{width:n.unref(y),height:n.unref(h)},{background:"#f1f1f1",position:"relative",overflow:"hidden"}])},[n.renderSlot(e.$slots,"loading",{isLoading:!n.unref(c)},(()=>[n.createElementVNode("div",B,n.toDisplayString(n.unref(c)?"":"map loading..."),1)]))],4),n.renderSlot(e.$slots,"default")],64))}}));function O(e){var t;const{on:o,off:a}=f(),l=n.inject("getMapInstance"),i=n.inject("parentUidGetter")||(null===(t=n.getCurrentInstance())||void 0===t?void 0:t.uid),r=l&&l(),s=`__initd__${i}`;let u;const c=({map:n})=>{u=e(n)};r?c({map:r}):o(s,c),n.onUnmounted((()=>{a(s,c),u&&u()}))}const L={style:{display:"none"}};var S=n.defineComponent(Object.assign(Object.assign({},{name:"BControl"}),{props:{anchor:{default:"BMAP_ANCHOR_TOP_LEFT"},offset:{default:()=>({x:83,y:18})}},emits:["initd","unload"],setup(e){const t=e,o=n.ref(),{ready:a}=g(),l=n.useAttrs();return n.onMounted((()=>{O((e=>{if(!o.value)return;const n=new BMapGL.Control;return n.defaultAnchor=window[t.anchor],n.defaultOffset=new BMapGL.Size(t.offset.x,t.offset.y),n.initialize=e=>e.getContainer().appendChild(o.value),e.addControl(n),a(e,n),()=>e.removeControl(n)}))})),(e,t)=>(n.openBlock(),n.createElementBlock("div",L,[n.createElementVNode("div",n.mergeProps({ref_key:"controlContainer",ref:o},n.unref(l)),[n.renderSlot(e.$slots,"default")],16)]))}}));var G=n.defineComponent(Object.assign(Object.assign({},{name:"BScale"}),{props:{anchor:{default:"BMAP_ANCHOR_BOTTOM_LEFT"},offset:{default:()=>({x:83,y:18})},unit:{default:"BMAP_UNIT_METRIC"}},emits:["initd","unload"],setup(e){const t=e,{ready:o}=g();let a;function l(){a.setUnit(window[t.unit])}return O((e=>(a=new BMapGL.ScaleControl({offset:new BMapGL.Size(t.offset.x,t.offset.y),anchor:window[t.anchor]}),l(),e.addControl(a),o(e,a),()=>e.removeControl(a)))),n.watch((()=>t.unit),l),(e,n)=>null}}));var P=n.defineComponent(Object.assign(Object.assign({},{name:"BZoom"}),{props:{anchor:{default:"BMAP_ANCHOR_BOTTOM_RIGHT"},offset:{default:()=>({x:83,y:18})}},emits:["initd","unload"],setup(e){const n=e,{ready:t}=g();let o;return O((e=>(o=new BMapGL.ZoomControl({offset:new BMapGL.Size(n.offset.x,n.offset.y),anchor:window[n.anchor]}),e.addControl(o),t(e,o),()=>e.removeControl(o)))),(e,n)=>null}}));var I=n.defineComponent(Object.assign(Object.assign({},{name:"BCityList"}),{props:{anchor:{default:"BMAP_ANCHOR_TOP_LEFT"},offset:{default:()=>({x:18,y:18})},expand:{type:Boolean,default:!1}},emits:["initd","unload"],setup(e){const n=e,{ready:t}=g();let o;return O((e=>(o=new BMapGL.CityListControl({expand:n.expand,offset:new BMapGL.Size(n.offset.x,n.offset.y),anchor:window[n.anchor]}),e.addControl(o),t(e,o),()=>e.removeControl(o)))),(e,n)=>null}}));var z=n.defineComponent(Object.assign(Object.assign({},{name:"BLocation"}),{props:{anchor:{default:"BMAP_ANCHOR_BOTTOM_RIGHT"},offset:{default:()=>({x:18,y:18})},onLocationError:null,onLocationSuccess:null},emits:["initd","unload","locationSuccess","locationError"],setup(e,{emit:n}){const t=e,{ready:o}=g();let a;return O((e=>(a=new BMapGL.LocationControl({offset:new BMapGL.Size(t.offset.x,t.offset.y),anchor:window[t.anchor]}),e.addControl(a),o(e,a),m(t,n,a),()=>e.removeControl(a)))),(e,n)=>null}}));const T={};var A=n.defineComponent(Object.assign(Object.assign({},{name:"BCopyright"}),{props:{anchor:{default:"BMAP_ANCHOR_BOTTOM_RIGHT"},offset:{default:()=>({x:83,y:18})}},emits:["initd","unload"],setup(e){var t;const o=e,{ready:a}=g(),l=n.ref();let i;const r=null===(t=n.getCurrentInstance())||void 0===t?void 0:t.uid;return n.onMounted((()=>{const{anchor:e,offset:n}=o;O((t=>{if(!l.value)return;let o=t.getBounds();return(i=T[e])||(i=new BMapGL.CopyrightControl({offset:new BMapGL.Size(n.x,n.y),anchor:window[e]}),T[e]=i,t.addControl(i)),i.addCopyright({id:r,content:l.value.innerHTML,bounds:o}),a(t,i),()=>{var n,o;const a=T[e],l=null===(n=null==a?void 0:a.getCopyrightCollection)||void 0===n?void 0:n.bind(a);l&&(null===(o=l())||void 0===o?void 0:o.length)>1?a.removeCopyright(r):(t.removeControl(a),Reflect.deleteProperty(T,e))}}))})),n.onUpdated((()=>{var e,n;if(!i)return;let t=null==i?void 0:i.getCopyright(r);(null==t?void 0:t.content)!==(null===(e=l.value)||void 0===e?void 0:e.innerHTML)&&i.addCopyright({id:r,content:null===(n=l.value)||void 0===n?void 0:n.innerHTML,bounds:t.bounds})})),(e,t)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"copyrightContainer",ref:l,style:{display:"none"}},[n.renderSlot(e.$slots,"default")],512))}}));var x=n.defineComponent(Object.assign(Object.assign({},{name:"BNavigation3d"}),{props:{anchor:{default:"BMAP_ANCHOR_BOTTOM_RIGHT"},offset:{default:()=>({x:83,y:18})}},emits:["initd","unload"],setup(e){const n=e,{ready:t}=g();let o;return O((e=>(o=new BMapGL.NavigationControl3D({offset:new BMapGL.Size(n.offset.x,n.offset.y),anchor:window[n.anchor]}),e.addControl(o),t(e,o),()=>e.removeControl(o)))),(e,n)=>null}}));var _=n.defineComponent(Object.assign(Object.assign({},{name:"BPanoramaControl"}),{props:{anchor:{default:"BMAP_ANCHOR_TOP_RIGHT"},offset:{default:()=>({x:10,y:10})}},emits:["initd","unload"],setup(e){const n=e,{ready:t}=g();let o;return O((e=>(o=new BMapGL.PanoramaControl,o.setOffset(new BMapGL.Size(n.offset.x,n.offset.y)),o.setAnchor(window[n.anchor]),e.addControl(o),t(e,o),()=>e.removeControl(o)))),(e,n)=>null}}));var j=n.defineComponent(Object.assign(Object.assign({},{name:"BPanoramaCoverageLayer"}),{emits:["initd","unload"],setup(e){const{ready:n}=g();let t;return O((e=>(t=new BMapGL.PanoramaCoverageLayer,e.addTileLayer(t),n(e,t),()=>e.removeTileLayer(t)))),(e,n)=>null}}));let E=null;var D=n.defineComponent(Object.assign(Object.assign({},{name:"BMarker"}),{props:{position:null,offset:{default:()=>({x:0,y:0})},icon:null,zIndex:null,enableMassClear:{type:Boolean,default:!0},enableDragging:{type:Boolean,default:!1},enableClicking:{type:Boolean,default:!0},raiseOnDrag:{type:Boolean,default:!1},draggingCursor:{default:"pointer"},rotation:{default:0},title:{default:""},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onInfowindowclose:null,onInfowindowopen:null,onDragstart:null,onDragging:null,onDragend:null,onRightClick:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],setup(e,{emit:t}){const o=e,{ready:l}=g();let s;function u(){const e=function(){if(null!==E)return E;const e="//mapopen.bj.bcebos.com/cms/react-bmap/markers_new2x_fbb9e99.png";E={simple_red:new BMapGL.Icon(e,new BMapGL.Size(21,33),{imageOffset:new BMapGL.Size(227,189),imageSize:new BMapGL.Size(300,300)}),simple_blue:new BMapGL.Icon(e,new BMapGL.Size(21,33),{imageOffset:new BMapGL.Size(227,225),imageSize:new BMapGL.Size(300,300)}),loc_red:new BMapGL.Icon(e,new BMapGL.Size(23,35),{imageOffset:new BMapGL.Size(200,189),imageSize:new BMapGL.Size(300,300)}),loc_blue:new BMapGL.Icon(e,new BMapGL.Size(23,35),{imageOffset:new BMapGL.Size(200,225),imageSize:new BMapGL.Size(300,300)}),start:new BMapGL.Icon(e,new BMapGL.Size(25,40),{imageOffset:new BMapGL.Size(200,139),imageSize:new BMapGL.Size(300,300)}),end:new BMapGL.Icon(e,new BMapGL.Size(25,40),{imageOffset:new BMapGL.Size(225,139),imageSize:new BMapGL.Size(300,300)}),location:new BMapGL.Icon(e,new BMapGL.Size(14,20),{imageOffset:new BMapGL.Size(124,233),imageSize:new BMapGL.Size(300,300)})};for(let n=1;n<=10;n++)E["red"+n]=new BMapGL.Icon(e,new BMapGL.Size(21,33),{imageOffset:new BMapGL.Size(21*(n-1),0),imageSize:new BMapGL.Size(300,300)});for(let n=1;n<=10;n++)E["blue"+n]=new BMapGL.Icon(e,new BMapGL.Size(21,33),{imageOffset:new BMapGL.Size(21*(n-1),66),imageSize:new BMapGL.Size(300,300)});return E}(),{icon:n}=o;if(a(n)&&e[n])return e[n];{const{anchor:e,imageOffset:t,imageSize:o,imageUrl:a,printImageUrl:l}=n,i={imageSize:new BMapGL.Size(o.width,o.height)};return e&&(i.anchor=new BMapGL.Size(e.x,e.y)),t&&(i.imageOffset=new BMapGL.Size(t.x,t.y)),l&&(i.printImageUrl=l),new BMapGL.Icon(a,new BMapGL.Size(o.width,o.height),i)}}function c(){s.setIcon(u())}function d(e){e?s.enableDragging():s.disableDragging()}function p(e){e?s.enableMassClear():s.disableMassClear()}function f(e){s.setOffset(new BMapGL.Size(e.x,e.y))}function y(e){s.setRotation(e)}return O((e=>{const a=()=>{if(!o.position)return;const{position:n,offset:a,enableMassClear:r,enableDragging:c,enableClicking:d,raiseOnDrag:p,draggingCursor:f,rotation:g,title:v,icon:h,zIndex:w}=o,b={offset:new BMapGL.Size(a.x,a.y),enableMassClear:r,enableDragging:c,enableClicking:d,raiseOnDrag:p,draggingCursor:f,title:v};h&&(b.icon=u()),s=new BMapGL.Marker(new BMapGL.Point(n.lng,n.lat),b),y(g),i(w)&&function(e){console.log("shezhi marker"),s.setZIndex(e)}(w),e.addOverlay(s),m(o,t,s),l(e,s)};return a(),n.watch((()=>o.position),r((e=>{var n;s?(n=e)&&n.lat&&n.lng&&s.setPosition(new BMapGL.Point(n.lng,n.lat)):a()})),{deep:!0}),n.watch((()=>o.icon),r(c),{deep:!0}),n.watch((()=>o.offset),r(f),{deep:!0}),n.watch((()=>o.enableDragging),d),n.watch((()=>o.enableMassClear),p),n.watch((()=>o.rotation),y),()=>{s&&e.removeOverlay(s)}})),n.provide("getOverlayInstance",(()=>s)),(e,n)=>null}}));var R=n.defineComponent(Object.assign(Object.assign({},{name:"BMarker3d"}),{props:{position:null,height:null,size:{default:50},shape:{default:"BMAP_SHAPE_CIRCLE"},fillColor:{default:"#f00"},fillOpacity:{default:.8},icon:null,enableMassClear:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onRightClick:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],setup(e,{emit:t}){const o=e,{ready:a}=g();let l;function i(){const{icon:e}=o,{anchor:n,imageOffset:t,imageSize:a,imageUrl:l,printImageUrl:i}=e,r={imageSize:new BMapGL.Size(a.width,a.height)};return n&&(r.anchor=new BMapGL.Size(n.x,n.y)),t&&(r.imageOffset=new BMapGL.Size(t.x,t.y)),i&&(r.printImageUrl=i),new BMapGL.Icon(l,new BMapGL.Size(a.width,a.height),r)}function s(e){l.setFillColor(e)}function u(e){l.setFillOpacity(e)}function c(){l.setIcon(i())}function d(e){e?l.enableMassClear():l.disableMassClear()}return O((e=>{const p=()=>{if(!o.position||!o.height)return;const{position:n,shape:r,fillColor:s,fillOpacity:u,size:c,icon:p,height:f,enableMassClear:g}=o,y={size:c,fillColor:s,fillOpacity:u,shape:window[r]};p&&(y.icon=i()),l=new BMapGL.Marker3D(new BMapGL.Point(n.lng,n.lat),f,y),e.addOverlay(l),d(g),m(o,t,l),a(e,l)};return p(),n.watch((()=>o.position),r((e=>{l?function(e){try{l.setPosition(new BMapGL.Point(e.lng,e.lat))}catch(e){console.error(e)}}(e):p()})),{deep:!0}),n.watch((()=>o.height),(e=>{var n;l?(n=e,l.setHeight(n)):p()})),n.watch((()=>o.enableMassClear),d),n.watch((()=>o.icon),r(c),{deep:!0}),n.watch((()=>o.enableMassClear),d),n.watch((()=>o.fillOpacity),u),n.watch((()=>o.fillColor),s),()=>{e.removeOverlay(l)}})),n.provide("getOverlayInstance",(()=>l)),(e,n)=>null}}));var W=n.defineComponent(Object.assign(Object.assign({},{name:"BLabel"}),{props:{content:null,position:null,offset:{default:()=>({x:0,y:0})},style:null,enableMassClear:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onRightclick:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],setup(e,{emit:t}){const o=e,{ready:a}=g();let l;function s(e){l.setPosition(new BMapGL.Point(e.lng,e.lat))}function u(e){i(e)&&l.setStyle(e)}function c(e){l.setContent(e)}function d(e){l.setOffset(new BMapGL.Size(e.x,e.y))}function p(e){e?l.enableMassClear():l.disableMassClear()}return O((e=>((()=>{const{content:n,position:a,offset:i,enableMassClear:r,style:s}=o,u={position:new BMapGL.Point(a.lng,a.lat),offset:new BMapGL.Size(i.x,i.y),enableMassClear:r};l=new BMapGL.Label(n,u),s&&l.setStyle(s),e.addOverlay(l),m(o,t,l)})(),a(e,l),n.watch((()=>o.position),r(s),{deep:!0}),n.watch((()=>o.offset),r(d),{deep:!0}),n.watch((()=>o.style),r(u),{deep:!0}),n.watch((()=>o.content),c),n.watch((()=>o.enableMassClear),p),()=>{l&&e.removeOverlay(l)}))),n.provide("getOverlayInstance",(()=>l)),(e,n)=>null}}));var N=n.defineComponent(Object.assign(Object.assign({},{name:"BPolyline"}),{props:{path:null,strokeColor:{default:"#000"},strokeWeight:{default:2},strokeOpacity:{default:1},strokeStyle:{default:"solid"},enableMassClear:{type:Boolean,default:!0},enableEditing:{type:Boolean,default:!1},enableClicking:{type:Boolean,default:!0},geodesic:{type:Boolean,default:!1},clip:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onLineupdate:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],setup(e,{emit:t}){const o=e,{ready:a}=g();let l;function i(e){return e.map((({lng:e,lat:n})=>new BMapGL.Point(e,n)))}function s(e){l.setStrokeColor(e)}function u(e){l.setStrokeOpacity(e)}function c(e){l.setStrokeWeight(e)}function d(e){l.setStrokeStyle(e)}function p(e){e?l.enableMassClear():l.disableMassClear()}function f(e){e?l.enableEditing():l.disableEditing()}return O((e=>{const g=()=>{if(!o.path||!o.path.length)return;const{path:n,strokeColor:r,strokeWeight:s,strokeOpacity:u,strokeStyle:c,enableMassClear:d,enableEditing:p,enableClicking:f,geodesic:g,clip:y}=o,v=i(n);l=new BMapGL.Polyline(v,{strokeColor:r,strokeWeight:s,strokeOpacity:u,strokeStyle:c,enableMassClear:d,enableEditing:p,enableClicking:f,geodesic:g,clip:y}),e.addOverlay(l),m(o,t,l),a(e,l)};return g(),n.watch((()=>o.path),r((e=>{var n;l?(n=e,l.setPath(i(n))):g()})),{deep:!0}),n.watch((()=>o.strokeColor),s),n.watch((()=>o.strokeOpacity),u),n.watch((()=>o.strokeWeight),c),n.watch((()=>o.strokeStyle),d),n.watch((()=>o.enableMassClear),p),n.watch((()=>o.enableEditing),f),()=>{e.removeOverlay(l)}})),n.provide("getOverlayInstance",(()=>l)),(e,n)=>null}}));var Z=n.defineComponent(Object.assign(Object.assign({},{name:"BBezierCurve"}),{props:{path:null,controlPoints:null,strokeColor:{default:"#000"},strokeWeight:{default:2},strokeOpacity:{default:1},strokeStyle:{default:"solid"},enableMassClear:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onLineupdate:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],setup(e,{emit:t}){const o=e,{ready:a}=g();let l;function i(e){return e.map((({lng:e,lat:n})=>new BMapGL.Point(e,n)))}function s(e){l.setStrokeColor(e)}function u(e){l.setStrokeOpacity(e)}function c(e){l.setStrokeWeight(e)}function d(e){l.setStrokeStyle(e)}function p(e){e?l.enableMassClear():l.disableMassClear()}return O((e=>{const f=()=>{if(!(o.path&&o.path.length&&o.controlPoints&&o.controlPoints.length))return;const{path:n,controlPoints:r,strokeColor:s,strokeWeight:u,strokeOpacity:c,strokeStyle:d,enableMassClear:p}=o,f=i(n),g=r.map((e=>i(e)));try{l=new BMapGL.BezierCurve(f,g,{strokeColor:s,strokeWeight:u,strokeOpacity:c,strokeStyle:d,enableMassClear:p})}catch(e){console.error("Init bezierCurve overlay error, make sure path and controlPoints data is correct!")}e.addOverlay(l),a(e,l),m(o,t,l)};return f(),n.watch((()=>o.path),r((e=>{var n;l?(n=e,l.setPath(i(n))):f()})),{deep:!0}),n.watch((()=>o.controlPoints),r((e=>{var n;l?(n=e,l.setControlPoints(n.map((e=>i(e))))):f()})),{deep:!0}),n.watch((()=>o.strokeColor),s),n.watch((()=>o.strokeOpacity),u),n.watch((()=>o.strokeWeight),c),n.watch((()=>o.strokeStyle),d),n.watch((()=>o.enableMassClear),p),()=>{e.removeOverlay(l)}})),n.provide("getOverlayInstance",(()=>l)),(e,n)=>null}}));var F=n.defineComponent(Object.assign(Object.assign({},{name:"BPolygon"}),{props:{path:null,isBoundary:{type:Boolean},strokeColor:{default:"#000"},autoCenter:{type:Boolean,default:!0},strokeWeight:{default:2},strokeOpacity:{default:1},strokeStyle:{default:"solid"},fillColor:{default:"#fff"},fillOpacity:{default:.3},enableMassClear:{type:Boolean},enableEditing:{type:Boolean},enableClicking:{type:Boolean},geodesic:{type:Boolean,default:!1},clip:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onLineupdate:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],setup(e,{emit:t}){const o=e,{ready:a}=g(),l=n.inject("baseMapSetCenterAndZoom");let i;function s(){n.nextTick((()=>{var e;if(o.autoCenter)try{const n=null===(e=i.getBounds())||void 0===e?void 0:e.getCenter();l(n)}catch(e){console.warn("set center error",e)}}))}function u(e){return e.map((({lng:e,lat:n})=>new BMapGL.Point(e,n)))}function c(e){i.setStrokeColor(e)}function d(e){i.setFillColor(e)}function p(e){i.setStrokeOpacity(e)}function f(e){i.setFillOpacity(e)}function y(e){i.setStrokeWeight(e)}function v(e){i.setStrokeStyle(e)}function h(e){e?i.enableMassClear():i.disableMassClear()}function w(e){e?i.enableEditing():i.disableEditing()}return O((e=>{const l=()=>{if(!o.path||!o.path.length)return;const{path:l,strokeColor:r,strokeWeight:g,strokeOpacity:b,strokeStyle:M,fillOpacity:C,fillColor:B,enableMassClear:k,enableEditing:O,enableClicking:L,geodesic:S,clip:G,isBoundary:P}=o,I=P?l:u(l);I&&(i=new BMapGL.Polygon(I,{strokeColor:r,strokeWeight:g,strokeOpacity:b,strokeStyle:M,fillOpacity:C,fillColor:B,enableMassClear:k,enableEditing:O,enableClicking:L,geodesic:S,clip:G}),e.addOverlay(i),m(o,t,i),a(e,i),s(),n.watch((()=>o.strokeColor),c),n.watch((()=>o.strokeOpacity),p),n.watch((()=>o.fillColor),d),n.watch((()=>o.fillOpacity),f),n.watch((()=>o.strokeWeight),y),n.watch((()=>o.strokeStyle),v),n.watch((()=>o.enableMassClear),h),n.watch((()=>o.enableEditing),w))};return l(),n.watch((()=>o.path),r((e=>{i?function(e){o.isBoundary?i.setPath(e):i.setPath(u(e));s()}(e):l()})),{deep:!0}),()=>{i&&e.removeOverlay(i)}})),n.provide("getOverlayInstance",(()=>i)),(e,n)=>null}}));var H=n.defineComponent(Object.assign(Object.assign({},{name:"BInfoWindow"}),{props:{modelValue:{type:Boolean,default:!1},title:{default:""},position:null,width:{default:0},height:{default:0},maxWidth:{default:220},offset:{default:()=>({x:0,y:0})},enableAutoPan:{type:Boolean,default:!0},enableCloseOnClick:{type:Boolean,default:!0},onClose:null,onOpen:null,onMaximize:null,onRestore:null,onClickclose:null},emits:["initd","unload","close","open","maximize","restore","clickclose","update:modelValue"],setup(e,{emit:t}){const o=e,a=n.ref(),l=n.computed({get:()=>o.modelValue,set(e){t("update:modelValue",e)}}),{ready:i}=g();let s,u;function c(){const{position:e}=o;u.openInfoWindow(s,new BMapGL.Point(e.lng,e.lat)),l.value=!0}function d(){var e;s.redraw(),Array.prototype.forEach.call((null===(e=a.value)||void 0===e?void 0:e.querySelectorAll("img"))||[],(e=>{e.onload=()=>{s.redraw()}}))}function p(e){s.setTitle(e)}function f(e){s.setHeight(e)}function y(e){s.setWidth(e)}function v(e){s.setMaxWidth(e)}function h(e){e?s.enableAutoPan():s.disableAutoPan()}function w(e){e?s.enableCloseOnClick():s.disableCloseOnClick()}function b(e){s.setPosition(new BMapGL.Point(e.lng,e.lat))}function M(e){s.setOffset(new BMapGL.Size(e.x,e.y))}return O((e=>{u=e;return(()=>{var n;const{title:i,width:r,height:u,enableAutoPan:c,maxWidth:p,offset:f,enableCloseOnClick:g}=o,y={width:r,height:u,title:i,maxWidth:p,enableAutoPan:c,enableCloseOnClick:g,offset:new BMapGL.Size(f.x,f.y)};s=new BMapGL.InfoWindow((null===(n=a.value)||void 0===n?void 0:n.innerHTML)||"",y),s.addEventListener("close",(()=>{o.modelValue&&(l.value=!1)})),s.addEventListener("open",(()=>{o.modelValue||(l.value=!0)})),d(),e.addOverlay(s),m(o,t,s)})(),i(e,s),n.watch((()=>o.position),r(b),{deep:!0}),n.watch((()=>o.offset),r(M),{deep:!0}),n.watch((()=>o.title),p),n.watch((()=>o.width),y),n.watch((()=>o.height),f),n.watch((()=>o.maxWidth),v),n.watch((()=>o.enableAutoPan),h),n.watch((()=>o.enableCloseOnClick),w),n.watch((()=>o.modelValue),r((()=>{o.modelValue?c():(s.hide(),l.value=!1)}))),o.modelValue&&n.nextTick((()=>{c(),n.nextTick((()=>{!s._visible&&(l.value=!1)}))})),()=>{s&&e.removeOverlay(s)}})),n.onUpdated((()=>{var e,n;s&&s.isOpen()&&(n=(null===(e=a.value)||void 0===e?void 0:e.innerHTML)||"",s.setContent(n),d())})),n.provide("getOverlayInstance",(()=>s)),(e,t)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"infoWindowContainer",ref:a,style:{display:"none"}},[n.renderSlot(e.$slots,"default")],512))}}));var U=n.defineComponent(Object.assign(Object.assign({},{name:"BCircle"}),{props:{center:null,radius:null,strokeColor:{default:"#000"},strokeOpacity:{default:1},fillColor:{default:"#fff"},fillOpacity:{default:.3},strokeWeight:{default:2},strokeStyle:{default:"solid"},enableMassClear:{type:Boolean,default:!0},enableEditing:{type:Boolean,default:!1},enableClicking:{type:Boolean,default:!0},geodesic:{type:Boolean,default:!1},clip:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onLineupdate:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],setup(e,{emit:t}){const o=e,{ready:a}=g();let l;function i(e){l.setRadius(e)}function s(e){l&&l.setCenter(new BMapGL.Point(e.lng,e.lat))}function u(e){l.setStrokeColor(e)}function c(e){l.setFillColor(e)}function d(e){l.setStrokeOpacity(e)}function p(e){l.setFillOpacity(e)}function f(e){l.setStrokeWeight(e)}function y(e){l.setStrokeStyle(e)}function v(e){e?l.enableMassClear():l.disableMassClear()}function h(e){e?l.enableEditing():l.disableEditing()}return O((e=>((()=>{const{center:n,radius:i,strokeColor:r,strokeOpacity:s,fillColor:u,fillOpacity:c,strokeWeight:d,strokeStyle:p,enableMassClear:f,enableEditing:g,enableClicking:y,geodesic:v,clip:h}=o,w=new BMapGL.Point(n.lng,n.lat);l=new BMapGL.Circle(w,i,{strokeColor:r,strokeWeight:d,strokeOpacity:s,strokeStyle:p,enableMassClear:f,enableEditing:g,enableClicking:y,geodesic:v,clip:h,fillOpacity:c,fillColor:u}),e.addOverlay(l),m(o,t,l),a(e,l)})(),n.watch((()=>o.center),r(s),{deep:!0}),n.watch((()=>o.radius),i),n.watch((()=>o.strokeColor),u),n.watch((()=>o.strokeOpacity),d),n.watch((()=>o.fillColor),c),n.watch((()=>o.fillOpacity),p),n.watch((()=>o.strokeWeight),f),n.watch((()=>o.strokeStyle),y),n.watch((()=>o.enableMassClear),v),n.watch((()=>o.enableEditing),h),()=>{e.removeOverlay(l)}))),n.provide("getOverlayInstance",(()=>l)),(e,n)=>null}}));var $=n.defineComponent(Object.assign(Object.assign({},{name:"BPrism"}),{props:{path:null,altitude:null,isBoundary:{type:Boolean},topFillColor:{default:"#fff"},topFillOpacity:{default:.5},sideFillColor:{default:"#fff"},sideFillOpacity:{default:.8},autoCenter:{type:Boolean,default:!0},enableMassClear:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onLineupdate:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],setup(e,{emit:t}){const o=e,{ready:a}=g(),l=n.inject("baseMapSetCenterAndZoom");let i;function s(e){e?i.enableMassClear():i.disableMassClear()}function u(e){i.setTopFillColor(e)}function c(e){i.setTopFillOpacity(e)}function d(e){i.setSideFillColor(e)}function p(e){i.setSideFillOpacity(e)}function f(e){i.setAltitude(e)}return O((e=>{const g=()=>{i&&e.removeOverlay(i)},y=()=>{if(!o.path||!o.path.length)return;const{path:r,altitude:g,isBoundary:y,topFillColor:v,topFillOpacity:h,sideFillColor:w,sideFillOpacity:b,enableMassClear:M}=o,C=y?r:function(e){return e.map((({lng:e,lat:n})=>new BMapGL.Point(e,n)))}(r);C&&(i=new BMapGL.Prism(C,g,{topFillColor:v,topFillOpacity:h,sideFillColor:w,sideFillOpacity:b,enableMassClear:M}),e.addOverlay(i),m(o,t,i),a(e,i),o.autoCenter&&n.nextTick((()=>{var e;try{const n=null===(e=i.getBounds())||void 0===e?void 0:e.getCenter();l(n)}catch(e){console.warn("set center error",e)}})),n.watch((()=>o.enableMassClear),s),n.watch((()=>o.topFillColor),u),n.watch((()=>o.topFillOpacity),c),n.watch((()=>o.sideFillColor),d),n.watch((()=>o.sideFillOpacity),p),n.watch((()=>o.altitude),f))};return y(),n.watch((()=>o.path),r((()=>{i||y()})),{deep:!0}),g})),n.provide("getOverlayInstance",(()=>i)),(e,n)=>null}}));var V=n.defineComponent(Object.assign(Object.assign({},{name:"BGroundOverlay"}),{props:{type:null,url:null,startPoint:null,endPoint:null,autoCenter:{type:Boolean,default:!1},opacity:{default:1},onClick:null,onDblclick:null,onMousemove:null,onMouseover:null,onMouseout:null},emits:["initd","unload","click","dblclick","mousemove","mouseover","mouseout"],setup(e,{emit:t}){const o=e,{ready:a}=g();let l;return O((e=>{const i=()=>{l&&e.removeOverlay(l)},u=()=>{i();let{startPoint:t,endPoint:a,opacity:r,type:u,autoCenter:c}=o;const d=function(){let e=o.url;"function"==typeof e&&(e=e());return e}();if(!d||!t||!a)return;const p=(f=t,g=a,new BMapGL.Bounds(new BMapGL.Point(f.lng,g.lat),new BMapGL.Point(g.lng,f.lat)));var f,g;const m={opacity:r,type:u,url:d.value||d};l=new BMapGL.GroundOverlay(p,m),e.addOverlay(l),c&&n.nextTick((()=>{try{const n=p.getCenter();e.panTo(n)}catch(e){s("set center error")}}))};return u(),m(o,t,l),a(e,l),n.watch((()=>o),r(u),{deep:!0}),i})),(e,n)=>null}}));var K=n.defineComponent(Object.assign(Object.assign({},{name:"BContextMenu"}),{props:{width:{default:100},menuItems:{default:()=>[]},onOpen:null,onClose:null},emits:["initd","unload","open","close"],setup(e,{emit:t}){const o=e,{ready:l}=g();let i;return O((e=>{const s=e,u=()=>{i&&s.removeContextMenu(i)},c=()=>{const{width:n,menuItems:l}=o;i=new BMapGL.ContextMenu;for(const t of l){if(a(t)&&"-"===t){i.addSeparator();continue}const o=new BMapGL.MenuItem(t.text,(function(n,o){t.callback.call(null,{point:n,pixel:o,map:e,BMapGL:BMapGL,target:s})}),{width:n,id:String(Math.random())});t.disabled?o.disable():o.enable(),i.addItem(o)}s.addContextMenu(i),m(o,t,i)};return n.watch((()=>o.menuItems),r((()=>{u(),c()})),{deep:!0}),c(),l(e,i),u})),(e,n)=>null}}));const J=[k,S,G,P,x,D,R,A,z,W,N,F,Z,U,I,$,H,K,_,j,V],q={install:(e,n)=>{const{ak:t,plugins:o,pluginsSourceLink:a}=n||{},l=e.config.globalProperties;for(const n of J){const t=n.name;e.component(t,n),e.component(t.replace("B",""),n)}t&&(l.$baiduMapAk=t),o&&(l.$baiduMapPlugins=o),a&&(l.$baiduMapPluginsSourceLink=a)},version:"0.0.39"},Y=q.install,Q=q.version;e.BezierCurve=Z,e.Circle=U,e.CityList=I,e.ContextMenu=K,e.Control=S,e.Copyright=A,e.GroundOverlay=V,e.InfoWindow=H,e.Label=W,e.Location=z,e.Map=k,e.Marker=D,e.Marker3d=R,e.Navigation3d=x,e.PanoramaControl=_,e.PanoramaCoverageLayer=j,e.Polygon=F,e.Polyline=N,e.Prism=$,e.Scale=G,e.Zoom=P,e.default=q,e.install=Y,e.useAddressGeocoder=function(e){const t=n.ref(),o=n.ref(!0),a=n.ref(!0);let i;return{get:(n,r)=>{if(i||(i=new BMapGL.Geocoder),!n)return s("missed required params: address");if(!r)return s("missed required  params: city");const c=l(n);o.value=!0,(c?Promise.all(n.map((e=>u(i,e,r)))):u(i,n,r)).then((n=>{if(n)if(c){let e=0;t.value=n.map((n=>(e+=+!n,n))),a.value=e===n.length}else t.value=n,a.value=!1;else t.value=n,a.value=!0;e&&e(t)})).catch((e=>{s(e),a.value=!0,t.value=null})).finally((()=>{o.value=!1}))},point:t,isLoading:o,isEmpty:a}},e.useAreaBoundary=function(e){const t=n.ref(!1),o=n.ref([]);let a;return n.onUnmounted((()=>{a=null})),{isLoading:t,boundaries:o,get:n=>{a||(a=new BMapGL.Boundary),t.value=!0,a.get(n,(n=>{t.value=!1,o.value=n.boundaries,e&&e(o)}))}}},e.useBrowserLocation=function(e,t){e=e||{};const a=n.ref({}),l=n.ref(!0),i=n.ref(!1),r=n.ref();return{get:()=>{e.SDKLocation=e.enableSDKLocation,new Promise(((n,t)=>{l.value=!0;const a=new BMapGL.Geolocation;a.getCurrentPosition((function(e){const l=a.getStatus();if(r.value=o[l],l===window.BMAP_STATUS_SUCCESS){const{address:t,accuracy:o,point:a}=e;n({accuracy:o,point:a,address:t})}else t()}),e)})).then((e=>{i.value=!1,a.value=e,t&&t(a)})).catch((()=>{i.value=!0})).finally((()=>{l.value=!1}))},isLoading:l,isError:i,status:r,location:a}},e.useIpLocation=function(e){const t=n.ref({}),o=n.ref(!0);return{location:t,isLoading:o,get:()=>{o.value=!0,(new BMapGL.LocalCity).get((n=>{o.value=!1,t.value={code:n.code,point:n.center,name:n.name},e&&e(t)}))}}},e.usePoint=function(){const e=n.ref(null);return{point:e,set:({lng:n,lat:t})=>{e.value=new BMapGL.Point(n,t)}}},e.usePointGeocoder=function(e={},t){e=e||{};const o=n.ref(),a=n.ref(!0),i=n.ref(!0);let r;return{get:n=>{if(!n)return s("missed required params: point");r||(r=new BMapGL.Geocoder);const u=l(n);a.value=!0,(u?Promise.all(n.map((n=>c(r,n,e)))):c(r,n,e)).then((e=>{if(e)if(u){let n=0;o.value=e.map((e=>(n+=+!e,e))),i.value=n===e.length}else o.value=e,i.value=!1;else o.value=e,i.value=!0;t&&t(o)})).catch((()=>{i.value=!0,o.value=void 0})).finally((()=>{a.value=!1}))},result:o,isLoading:a,isEmpty:i}},e.useTrackAnimation=function(e,o){let a,l,i,r;const s=n.ref("INITIAL");n.watch((()=>e.value),(e=>{i=e}));const u=()=>{setTimeout((()=>{a&&(s.value=t[a._status])}))};return n.onUnmounted((()=>{a&&"INITIAL"!==s.value&&a.cancel(),r&&(r.removeOverlay(l),l=null)})),{setPath:e=>{const n=e.map((e=>new BMapGL.Point(e.lng,e.lat)));l=new BMapGL.Polyline(n),a||(r=i.getMapInstance(),a=new BMapGLLib.TrackAnimation(r,l,o))},start:()=>{a&&"INITIAL"===s.value&&(a.start(),u(),setTimeout((()=>{a._viewAni.addEventListener("animationend",u)})))},stop:()=>{a&&(a.pause(),u())},cancel:()=>{a&&(a.cancel(),u())},proceed:()=>{a&&(a.continue(),u())},status:s}},e.useViewAnimation=function(e,t){(t=t||{}).disableDragging=void 0===t.disableDragging;const o=n.ref("INITIAL"),a={animationcancel:[()=>o.value="INITIAL"],animationend:[()=>o.value="INITIAL"],animationstart:[()=>o.value="PLAYING"]};let l,i,r=!1;n.watch((()=>e.value),(e=>{l=e}));const s=()=>{const{enableDragging:e}=l.getBaseMapOptions();l.setDragging(e)};let u={addEventListener(e,n){a[e]||(a[e]=[]),a[e].push(n)},removeEventListener(e,n){const t=a[e];if(t)if(n)for(let e=t.length;e>=0;e--)t[e]===n&&t.splice(e,1);else a[e]=[]}};return n.onUnmounted((()=>{try{u&&"INITIAL"==o.value&&(i=l.getMapInstance(),u._cancel(i),s())}catch(e){return!1}})),{viewAnimation:u,start:()=>{r&&(i=l.getMapInstance(),i.startViewAnimation(u),l.setDragging(!t.disableDragging))},cancel:()=>{r&&(u._cancel(i),s())},stop:()=>{r&&"PLAYING"===o.value&&(u._pause(),o.value="STOPPING")},proceed:()=>{r&&"STOPPING"===o.value&&(u._continue(),o.value="PLAYING")},status:o,setKeyFrames:e=>{const{loop:n,duration:o,delay:l}=t;for(const n of e)if(n.center){const{lng:e,lat:t}=n.center;n.center=new BMapGL.Point(e,t)}u=new BMapGL.ViewAnimation(e,{duration:o,delay:l,interation:n});for(const e of Object.keys(a)){const n=a[e];n&&n.length&&n.forEach((n=>{u.addEventListener(e,n)}))}r=!0}}},e.version=Q,Object.defineProperty(e,"__esModule",{value:!0})}));
